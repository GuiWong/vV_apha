     1                                  %include "vVc/assembly/w_runtime/vV_defines.asm"		
     1                              <1> 
     2                              <1> 
     3                              <1> 
     4                              <1> ;------------------Variables From Project-------------
     5                              <1> 
     6                              <1> 	;------------------Should come from io module(need refactoring)
     7                              <1> 
     8                              <1> 
     9                              <1> 	%define vV_input_buffer_size 255
    10                              <1> 	%define vV_output_buffer_size 255
    11                              <1> 
    12                              <1> 
    13                              <1> 
    14                              <1> ;------------------Implementation Relative-------------
    15                              <1> 
    16                              <1> %deftok vV_sp 'r15'
    17                              <1> 
    18                              <1> %deftok vV_spS 'r14'
    19                              <1> 
    20                              <1> %deftok vV_sdir '-'
    21                              <1> 
    22                              <1> 
    23                              <1> 
    24                              <1> 
    25                              <1> ;------------------Stack Shortcuts--------------------
    26                              <1> 
    27                              <1> %define cell(a) (a*4)
    28                              <1> 
    29                              <1> 
    30                              <1> %define vV_top [vV_sp vV_sdir %+ cell(1)]
    31                              <1> %define vV_2nd [vV_sp vV_sdir %+ cell(2)]
    32                              <1> 
    33                              <1> %define vV_stack_v(a) ([vV_sp vV_sdir %+ cell(a)])
    34                              <1> 
    35                              <1> 
    36                              <1> ;-------------------Out_Format Pointer------------------
    37                              <1> 
    38                              <1> %deftok vV_FORMAT_BIN "vV_ascii_int_to_bin"
    39                              <1> %deftok vV_FORMAT_DEC "vV_ascii_int_to_dec"
    40                              <1> %deftok vV_FORMAT_HEX "vV_ascii_int_to_hex"
    41                              <1> 
    42                              <1> 
    43                              <1> 
    44                              <1> ;--------------------Op Macros--------------------------
    45                              <1> 
    46                              <1> %macro vV_push 1
    47                              <1> 
    48                              <1> 	mov DWORD[vV_sp] , %1
    49                              <1> 	add vV_sp , 4
    50                              <1> 
    51                              <1> %endmacro
    52                              <1> 
    53                              <1> %macro vV_pop 1
    54                              <1> 
    55                              <1> 	sub vV_sp , 4
    56                              <1> 	mov %1 , [vV_sp]
    57                              <1> 	
    58                              <1> %endmacro
    59                              <1> 
    60                              <1> %macro vV_swap 0
    61                              <1> 
    62                              <1> 	mov edx , [vV_sp-4]
    63                              <1> 	mov eax , [vV_sp-8]
    64                              <1> 	mov [vV_sp-8] , edx 
    65                              <1> 	mov [vV_sp-4] , eax 
    66                              <1> 	
    67                              <1> %endmacro
    68                              <1> 
    69                              <1> %macro vV_dup 1
    70                              <1> 
    71                              <1> 	mov ecx , %1
    72                              <1> 	lea rsi , [vV_sp-cell(%1)]
    73                              <1> 	mov rdi , vV_sp
    74                              <1> 		
    75                              <1> 	rep movsd
    76                              <1> 	
    77                              <1> 	add vV_sp , cell(%1)
    78                              <1> 	
    79                              <1> %endmacro
    80                              <1> 
    81                              <1> 
    82                              <1> %macro vV_dec_sp 1
    83                              <1> 
    84                              <1> 	sub vV_sp , cell(%1)
    85                              <1> 	
    86                              <1> %endmacro
    87                              <1> 	
     2                                  %include "vVc/assembly/w_runtime/vV_error_code.asm"		
     1                              <1> 
     2                              <1> %define vV_ERR_IO_I_OVERFLOW 1
     3                              <1> %define vV_ERR_IO_O_OVERFLOW 2
     4                              <1> %define vV_ERR_IO_I_UNVALID 3
     5                              <1> %define vV_ERR_IO_O_UNVALID 4
     6                              <1> %define vV_ERR_IO_I_VALUE_OVERFLOW 5
     7                              <1> 
     8                              <1> 
     9                              <1> %define vV_ERR_VALUE_OVERFLOW 8
    10                              <1> 
    11                              <1> 
    12                              <1> %define vV_ERR_MEMORY_BUFFER_LIMIT 16
    13                              <1> %define vV_ERR_MEMORY_OUT_OF_BOUND 17
    14                              <1> 
    15                              <1> 
    16                              <1> 
    17                              <1> %define vV_ERR_USER_UNDEFINED 31
     3                                  %include "vVc/assembly/w_runtime/vV_runtime.asm"		
     1                              <1> %define SYS_EXIT 60
     2                              <1> 
     3                              <1> 
     4                              <1> ;%include "vVc/assembly/w_runtime/vV_errors.asm"
     5                              <1> ;%include "vVc/assembly/w_runtime/vV_system00.asm"
     6                              <1> ;%include "vVc/assembly/w_runtime/vV_system10.asm"
     7                              <1> ;%include "vVc/assembly/w_runtime/vV_system90.asm"
     8                              <1> 
     9                              <1> 
    10                              <1> global _start
    11                              <1> 
    12                              <1> 
    13                              <1> 
    14                              <1> ;extern vV_entry_point			;Defined by main program
    15                              <1> 
    16                              <1> 
    17                              <1> 
    18                              <1> 	
    19                              <1> segment .data 
    20                              <1> 
    21                              <1> 
    22                              <1> 	
    23                              <1> 
    24                              <1> segment .text 
    25                              <1> 
    26                              <1> 
    27                              <1> 	vV_forced_exit:				;rax hold exit code
    28                              <1> 							;Removed default error printing
    29                              <1> 							;This will now happens in errors module
    30                              <1> 
    31 00000000 4889C7              <1> 		mov rdi, rax
    32 00000003 B83C000000          <1> 		mov rax, SYS_EXIT
    33 00000008 0F05                <1> 		syscall
    34                              <1> 		
    35                              <1> 		
    36                              <1> 
    37                              <1> 
    38                              <1> 	save_regs:			;In case called from other process
    39                              <1> 	
    40 0000000A 58                  <1> 		pop rax
    41                              <1> 	
    42 0000000B 53                  <1> 		push rbx
    43 0000000C 4154                <1> 		push r12
    44 0000000E 4155                <1> 		push r13
    45 00000010 4156                <1> 		push r14
    46 00000012 4157                <1> 		push r15
    47                              <1> 		
    48 00000014 50                  <1> 		push rax
    49                              <1> 		
    50 00000015 C3                  <1> 		ret
    51                              <1> 		
    52                              <1> 	restore_regs:
    53                              <1> 	
    54 00000016 58                  <1> 		pop rax
    55                              <1> 	
    56 00000017 415F                <1> 		pop r15
    57 00000019 415E                <1> 		pop r14
    58 0000001B 415D                <1> 		pop r13
    59 0000001D 415C                <1> 		pop r12
    60 0000001F 5B                  <1> 		pop rbx
    61                              <1> 		
    62 00000020 50                  <1> 		push rax
    63                              <1> 		
    64 00000021 C3                  <1> 		ret
    65                              <1> 		
    66                              <1> 	setup_memory:
    67                              <1> 	
    68 00000022 C70425[90000000]00- <1> 		mov DWORD [vV_input_buffer_content] , 0
    68 0000002A 000000              <1>
    69 0000002D C70425[93010000]00- <1> 		mov DWORD [vV_output_buffer_content] , 0
    69 00000035 000000              <1>
    70                              <1> 		
    71                              <1> 		;mov DWORD [endofline] , 0xa
    72                              <1> 		
    73 00000038 C70425[28010000]-   <1> 		mov DWORD[vV_sys_format_mode] , vV_ascii_int_to_dec
    73 0000003F [0A050000]          <1>
    74                              <1> 		
    75                              <1> 		
    76 00000043 B9FFFFFF3F          <1> 		mov ecx , 1073741823
    77 00000048 48290C25[40000000]  <1> 		sub QWORD[vV_local_offset] , rcx
    78                              <1> 		
    79                              <1> 		
    80 00000050 C3                  <1> 		ret
    81                              <1> 		
    82                              <1> 		
    83                              <1> 	
    84                              <1> 		
    85                              <1> _start:				;Entry point of Every Program
    86                              <1> 	
    87                              <1> 		
    88                              <1> 
    89 00000051 4889E5              <1> 	mov rbp, rsp				;Setup Stack Frame
    90                              <1> 	
    91 00000054 48892C25[40000000]  <1> 	mov QWORD[vV_local_offset] , rbp
    92 0000005C 48892C25[48000000]  <1> 	mov QWORD[vV_initial_frame] , rbp
    93                              <1> 	
    94 00000064 49BF-               <1> 	mov r15 , fake_stack_start			;setup fake data stack
    94 00000066 [9A02040000000000]  <1>
    95                              <1> 	
    96 0000006E E897FFFFFF          <1> 	call save_regs				;just in case
    97                              <1> 	
    98                              <1> 	
    99 00000073 E8AAFFFFFF          <1> 	call setup_memory			;all memory setup at start
   100                              <1> 	
   101                              <1> 	
   102                              <1> 	
   103 00000078 E81D050000          <1> 	call vV_entry_point			;Start the program 
   104                              <1> vV_initial_return:
   105                              <1> 	
   106 0000007D E894FFFFFF          <1> 	call restore_regs
   107                              <1> 	
   108                              <1> 
   109                              <1> ;------------------------------------------------------------------------------
   110                              <1> 
   111 00000082 B83C000000          <1> 	mov rax, SYS_EXIT
   112 00000087 BF00000000          <1> 	mov rdi, 0		;Normal exit procedure (no code returned from main)
   113 0000008C 0F05                <1> 	syscall
   114                              <1> 	
   115                              <1> 	
   116                              <1> 	
   117                              <1> 	
   118                              <1> 	
     4                                  %include "vVc/assembly/w_runtime/vV_system00.asm"		
     1                              <1> 
     2                              <1> segment .bss
     3                              <1> 
     4                              <1> 	ALIGNB 4
     5 00000000 <res 00000040>      <1> 	vV_sys_start:	resd 16		;not used now
     6 00000040 <res 00000008>      <1> 	vV_local_offset: resq 1
     7 00000048 <res 00000008>      <1> 	vV_initial_frame: resq 1
     8                              <1> 	
     9                              <1> 	
    10                              <1> segment .data
    11                              <1> 
    12                              <1> 
    13                              <1> ;--Start of Memory----------------------------------------------------------
    14                              <1> 
    15                              <1> 	ALIGN 8
    16                              <1> 	
    17                              <1> ;--System adresses offsets----------------
    18                              <1> 
    19                              <1> 	
    20                              <1> 	
    21                              <1> 	
    22                              <1> ;---------------------Error Managment----------
    23                              <1> 
    24                              <1> 
    25                              <1> ;error vectors	
    26                              <1> 	
    27                              <1> 	vV_error_vectors:
    28 00000000 [3C01000000000000]- <1> 	times 17 dq vV_error_unhandeled
    28 00000000 <rept>              <1>
    29 00000088 [C600000000000000]  <1> 	dq vV_error_invalid_index
    30 00000090 [3C01000000000000]- <1> 	times 13 dq vV_error_unhandeled
    30 00000090 <rept>              <1>
    31 000000F8 [BA00000000000000]  <1> 	dq vV_user_error
    32                              <1> 
    33                              <1> 	
    34                              <1> 	
    35                              <1> segment .text
    36                              <1> 
    37                              <1> 
    38                              <1> vV_error:
    39                              <1> 
    40 0000008E 52                  <1> 	push rdx
    41                              <1> 	
    42 0000008F 4831D2              <1> 	xor rdx , rdx
    43                              <1> 	
    44 00000092 88E2                <1> 	mov dl , ah
    45                              <1> 	
    46 00000094 C0E203              <1> 	shl dl , 3
    47                              <1> 	
    48 00000097 67FF92[00000000]    <1> 	call [vV_error_vectors + edx]
    49                              <1> 	
    50                              <1> 	
    51 0000009E 5A                  <1> 	pop rdx
    52                              <1> 	
    53 0000009F C3                  <1> 	ret
    54                              <1> 	
    55                              <1> 	
    56                              <1> vV_error_fatal:
    57                              <1> 
    58                              <1> 	
    59 000000A0 88D0                <1> 	mov al , dl
    60                              <1> 	
    61 000000A2 C0E803              <1> 	shr al , 3
    62                              <1> 
    63 000000A5 E856FFFFFF          <1> 	call vV_forced_exit
    64                              <1> 	
    65                              <1> vV_bound_error:
    66                              <1> 
    67 000000AA 89CB                <1> 	mov ebx , ecx
    68 000000AC B411                <1> 	mov ah , vV_ERR_MEMORY_OUT_OF_BOUND
    69 000000AE E8DBFFFFFF          <1> 	call vV_error	
    70                              <1> 	
    71 000000B3 B011                <1> 	mov al , vV_ERR_MEMORY_OUT_OF_BOUND
    72 000000B5 E846FFFFFF          <1> 	call vV_forced_exit
    73                              <1> 	
    74                              <1> vV_user_error:
    75                              <1> 	
    76 000000BA E87D000000          <1> 	call vV_error_unhandeled
    77                              <1> 	
    78 000000BF B01F                <1> 	mov al , vV_ERR_USER_UNDEFINED
    79 000000C1 E83AFFFFFF          <1> 	call vV_forced_exit
    80                              <1> 	
    81                              <1> 	
    82                              <1> 	
    83                              <1> 	
    84                              <1> 	
    85                              <1> 
    86                              <1> 	
     5                                  %include "vVc/assembly/w_runtime/vV_errors.asm"		
     1                              <1> 
     2                              <1> 
     3                              <1> 
     4                              <1> segment .bss
     5                              <1> 
     6                              <1> 
     7                              <1> 	ALIGNB 4
     8                              <1> 		
     9                              <1> 	vV_error_buffer:
    10 00000050 <res 00000040>      <1> 	resb 64
    11                              <1> 	vV_end_err_buff:
    12                              <1> 	vV_error_buffer_size equ vV_end_err_buff-vV_error_buffer
    13                              <1> 
    14                              <1> 
    15                              <1> 
    16                              <1> 
    17                              <1> segment .data
    18                              <1> 
    19                              <1> ;Error String	
    20                              <1> 
    21                              <1> 	
    22                              <1> 	vV_error_msg:
    23 00000100 556E68616E64656C65- <1> 	.default: db "Unhandeled Error "
    23 00000109 64204572726F7220    <1>
    24                              <1> 	default_size equ $-.default
    25 00000111 496E76616C69642049- <1> 	.invalid_index: db "Invalid Index Error : "
    25 0000011A 6E646578204572726F- <1>
    25 00000123 72203A20            <1>
    26                              <1> 	inv_indx_size equ $-.invalid_index
    27                              <1> 
    28                              <1> 
    29                              <1> 
    30                              <1> segment .text
    31                              <1> 
    32                              <1> 
    33                              <1> vV_error_invalid_index:
    34                              <1> 
    35                              <1> 
    36 000000C6 56                  <1> 	push rsi
    37 000000C7 57                  <1> 	push rdi	;Save reg used by syscall
    38 000000C8 4151                <1> 	push r9	;and by conversion func
    39 000000CA 53                  <1> 	push rbx	;Save Arg
    40                              <1> 	
    41 000000CB BA16000000          <1> 	mov edx , inv_indx_size				;string lenght
    42 000000D0 48BE-               <1> 	mov rsi , vV_error_msg.invalid_index			;strng ptr
    42 000000D2 [1101000000000000]  <1>
    43 000000DA BF02000000          <1> 	mov rdi , 2				;file descriptor, stderr
    44 000000DF B801000000          <1> 	mov rax , 1				; Write sysCall
    45 000000E4 0F05                <1> 	syscall	
    46                              <1> 	
    47                              <1> 	
    48 000000E6 58                  <1> 	pop rax
    49                              <1> 	
    50 000000E7 BF[50000000]        <1> 	mov edi , vV_error_buffer
    51 000000EC 41B940000000        <1> 	mov r9d , vV_error_buffer_size
    52 000000F2 E813040000          <1> 	call vV_ascii_int_to_dec	
    53                              <1> 
    54 000000F7 67C680[50000000]0A  <1> 	mov BYTE[vV_error_buffer + eax] , 0xa
    55                              <1> 	
    56 000000FF FFC0                <1> 	inc eax
    57                              <1> 	
    58 00000101 89C2                <1> 	mov edx , eax				;string lenght
    59 00000103 48BE-               <1> 	mov rsi , vV_error_buffer			;strng ptr
    59 00000105 [5000000000000000]  <1>
    60 0000010D BF02000000          <1> 	mov rdi , 2				;file descriptor, stderr
    61 00000112 B801000000          <1> 	mov rax , 1				; Write sysCall
    62 00000117 0F05                <1> 	syscall
    63                              <1> 	
    64 00000119 4159                <1> 	pop r9
    65 0000011B 5F                  <1> 	pop rdi
    66 0000011C 5E                  <1> 	pop rsi
    67                              <1> 	
    68                              <1> 	
    69 0000011D 4889F8              <1> 	mov rax , rdi 
    70                              <1> 	vV_push eax
    70                              <2> 
    70 00000120 418907              <2>  mov DWORD[vV_sp] , %1
    70 00000123 4983C704            <2>  add vV_sp , 4
    70                              <2> 
    71 00000127 E82A010000          <1> 	call vV_io_out_default
    72 0000012C E8E4000000          <1> 	call vV_io_flush
    73                              <1> 	
    74 00000131 E885000000          <1> 	call vV_climb_call_stack
    75 00000136 E865FFFFFF          <1> 	call vV_error_fatal
    76                              <1> 	
    77 0000013B C3                  <1> 	ret
    78                              <1> 	
    79                              <1> 	
    80                              <1> 	
    81                              <1> 
    82                              <1> 	
    83                              <1> vV_error_unhandeled:
    84                              <1> 
    85                              <1> 
    86 0000013C 56                  <1> 	push rsi
    87 0000013D 57                  <1> 	push rdi	;Save reg used by syscall
    88 0000013E 4151                <1> 	push r9	;and by conversion func
    89                              <1> 	
    90                              <1> 	
    91                              <1> ;push rax	;Save flags ( and value)
    92                              <1> 
    93 00000140 53                  <1> 	push rbx	;Save Arg
    94 00000141 52                  <1> push rdx		;Save error code
    95                              <1> 	
    96                              <1> 	
    97 00000142 BA11000000          <1> 	mov edx , default_size				;string lenght
    98 00000147 48BE-               <1> 	mov rsi , vV_error_msg.default			;strng ptr
    98 00000149 [0001000000000000]  <1>
    99 00000151 BF02000000          <1> 	mov rdi , 2				;file descriptor, stderr
   100 00000156 B801000000          <1> 	mov rax , 1				; Write sysCall
   101 0000015B 0F05                <1> 	syscall	
   102                              <1> 	
   103                              <1> 	
   104 0000015D 58                  <1> pop rax	;error code
   105                              <1> 
   106                              <1> 
   107 0000015E C0E803              <1> 	shr al , 3
   108                              <1> 	
   109                              <1> 	
   110 00000161 BF[50000000]        <1> 	mov edi , vV_error_buffer
   111 00000166 41B940000000        <1> 	mov r9d , vV_error_buffer_size
   112                              <1> 	
   113                              <1> 
   114 0000016C E899030000          <1> 	call vV_ascii_int_to_dec	
   115                              <1> 	
   116                              <1> 		
   117                              <1> 	
   118 00000171 67C680[50000000]20  <1> 	mov BYTE[vV_error_buffer + eax] , ' '
   119                              <1> 	
   120                              <1> 	
   121                              <1> 	
   122                              <1> 	
   123 00000179 67488DB8[51000000]  <1> 	lea rdi , [vV_error_buffer + eax + 1]
   124 00000181 4129F9              <1> 	sub r9d , edi
   125                              <1> 	
   126 00000184 58                  <1> 	pop rax
   127                              <1> 	
   128 00000185 E880030000          <1> 	call vV_ascii_int_to_dec
   129                              <1> 	
   130 0000018A 674C8D0C07          <1> 	lea r9 , [edi + eax]
   131                              <1> 	
   132 0000018F 41C6010A            <1> 	mov BYTE[r9] , 0xa
   133                              <1> 	
   134 00000193 49FFC1              <1> 	inc r9
   135                              <1> 	
   136 00000196 4981E9[50000000]    <1> 	sub r9 , vV_error_buffer
   137                              <1> 	
   138 0000019D 4489CA              <1> 	mov edx , r9d				;string lenght
   139 000001A0 48BE-               <1> 	mov rsi , vV_error_buffer			;strng ptr
   139 000001A2 [5000000000000000]  <1>
   140 000001AA BF02000000          <1> 	mov rdi , 2				;file descriptor, stderr
   141 000001AF B801000000          <1> 	mov rax , 1				; Write sysCall
   142 000001B4 0F05                <1> 	syscall
   143                              <1> 	
   144 000001B6 4159                <1> 	pop r9
   145 000001B8 5F                  <1> 	pop rdi
   146 000001B9 5E                  <1> 	pop rsi
   147                              <1> 	
   148                              <1> 	
   149                              <1> 	
   150                              <1> 	
   151 000001BA C3                  <1> 	ret
   152                              <1> 	
   153                              <1> 	
   154                              <1> 	
   155                              <1> vV_climb_call_stack:
   156                              <1> 
   157 000001BB 4889E9              <1> 	mov rcx , rbp
   158                              <1> 	
   159 000001BE 51                  <1> 	push rcx
   160                              <1> 	
   161                              <1> 	
   162                              <1> 	..@loop_call:
   163                              <1> 	
   164                              <1> 	;xor rax , rax
   165 000001BF 488B4108            <1> 	mov rax , [rcx+8]
   166                              <1> 	
   167 000001C3 483D[7D000000]      <1> 	cmp rax , vV_initial_return
   168                              <1> 	
   169 000001C9 7413                <1> 	je ..@exit
   170                              <1> 	
   171                              <1> 	vV_push eax	
   171                              <2> 
   171 000001CB 418907              <2>  mov DWORD[vV_sp] , %1
   171 000001CE 4983C704            <2>  add vV_sp , 4
   171                              <2> 
   172 000001D2 E87F000000          <1> 	call vV_io_out_default
   173                              <1> 	
   174 000001D7 59                  <1> 	pop rcx 
   175 000001D8 488B09              <1> 	mov rcx , [rcx]
   176 000001DB 51                  <1> 	push rcx
   177                              <1> 	
   178 000001DC EBE1                <1> 	jmp ..@loop_call
   179                              <1> 	..@exit:
   180                              <1> 	
   181                              <1> 	vV_push eax	
   181                              <2> 
   181 000001DE 418907              <2>  mov DWORD[vV_sp] , %1
   181 000001E1 4983C704            <2>  add vV_sp , 4
   181                              <2> 
   182 000001E5 E86C000000          <1> 	call vV_io_out_default
   183                              <1> 	
   184 000001EA 59                  <1> 	pop rcx 
   185                              <1> 	
   186 000001EB C3                  <1> 	ret
   187                              <1> 	
   188                              <1> 	
   189                              <1> 	
   190                              <1> 		
   191                              <1> 		
   192                              <1> 		
   193                              <1> 		
   194                              <1> 		
   195                              <1> 		
   196                              <1> 		
   197                              <1> 		
   198                              <1> 		
   199                              <1> 		
   200                              <1> 		
   201                              <1> 		
   202                              <1> 		
   203                              <1> 		
   204                              <1> 		
   205                              <1> 		
   206                              <1> 		
   207                              <1> 		
   208                              <1> 		
   209                              <1> 
     6                                  %include "vVc/assembly/w_runtime/vV_system10.asm"		
     1                              <1> 
     2                              <1> segment .bss
     3                              <1> 
     4                              <1> 	ALIGNB 4
     5                              <1> 	
     6                              <1> 	
     7                              <1> 	;------------Input Buffer
     8                              <1> 
     9                              <1> 
    10                              <1> 	
    11 00000090 <res 00000004>      <1> 	vV_input_buffer_content: resb 4			;Input Buffer current content
    12 00000094 <res 000000FF>      <1> 	vV_input_buffer: resb vV_input_buffer_size		;Input Buffer of 256 char
    13                              <1> 	
    14                              <1> 	
    15                              <1> 	
    16                              <1> 	
    17                              <1> ;------------Output Buffer
    18                              <1> 
    19                              <1> 
    20                              <1> 
    21                              <1> 	
    22 00000193 <res 00000004>      <1> 	vV_output_buffer_content: resb 4			;Output Buffer current content
    23 00000197 <res 000000FF>      <1> 	vV_output_buffer: resb vV_output_buffer_size		;Output Buffer of 256 char
    24                              <1> 	
    25                              <1> 	
    26                              <1> 	
    27                              <1> 	
    28                              <1> ;------------Number Buffer
    29                              <1> 
    30                              <1> 
    31                              <1> 	
    32                              <1> 	
    33                              <1> 	;w_number_buffer: resb 10				;Todo: Handle Bigger Numbers
    34                              <1> 	;endofline: resb 1					;Maybe Not Needed
    35                              <1> 	
    36                              <1> 
    37                              <1> 
    38                              <1> segment .data
    39 00000127 90                  <1> 	ALIGN 4
    40 00000128 [0A050000]          <1> 	vV_sys_format_mode: dd vV_ascii_int_to_dec
     7                                  %include "vVc/assembly/w_runtime/vV_io.asm"			
     1                              <1> 
     2                              <1> 
     3                              <1> ;%include "vVc/assembly/w_runtime/vV_ascii.asm"
     4                              <1> 
     5                              <1> 
     6                              <1> ;Group all read/wrie syscalls
     7                              <1> 
     8                              <1> ;global convert_to_string
     9                              <1> ;global convert_to_int
    10                              <1> 
    11                              <1> ;extern vV_input_buffer
    12                              <1> ;extern vV_output_buffer
    13                              <1> ;extern w_number_buffer
    14                              <1> 
    15                              <1> global wio_out
    16                              <1> global wio_get
    17                              <1> global wio_get_str_raw
    18                              <1> global wio_get_str_null
    19                              <1> global wio_get_str_nline
    20                              <1> global wio_move_in_to_out
    21                              <1> 
    22                              <1> 
    23                              <1> segment .text 
    24                              <1> 
    25                              <1> 
    26                              <1> 
    27                              <1> vV_io_flush_no_nline:							;Temporary
    28                              <1> 	
    29                              <1> 	
    30                              <1> 	
    31 000001EC 8B1425[93010000]    <1> 	mov edx , DWORD[vV_output_buffer_content]			;string lenght	
    32                              <1> 	
    33 000001F3 C70425[93010000]00- <1> 	mov DWORD[vV_output_buffer_content] , 0
    33 000001FB 000000              <1>
    34                              <1> 	
    35 000001FE 48BE-               <1> 	mov rsi , vV_output_buffer			;strng ptr
    35 00000200 [9701000000000000]  <1>
    36                              <1> 		
    37 00000208 BF01000000          <1> 	mov rdi , 1					;file descriptor, stdout
    38 0000020D B801000000          <1> 	mov rax , 1					; Write sysCall
    39 00000212 0F05                <1> 	syscall
    40                              <1> 	
    41                              <1> 	
    42                              <1> 	
    43 00000214 C3                  <1> 	ret
    44                              <1> 
    45                              <1> vV_io_flush:
    46                              <1> 	
    47                              <1> 	
    48                              <1> 	
    49 00000215 8B1425[93010000]    <1> 	mov edx , DWORD[vV_output_buffer_content]			;string lenght	
    50                              <1> 	
    51 0000021C C70425[93010000]00- <1> 	mov DWORD[vV_output_buffer_content] , 0
    51 00000224 000000              <1>
    52                              <1> 	
    53 00000227 48BE-               <1> 	mov rsi , vV_output_buffer			;strng ptr
    53 00000229 [9701000000000000]  <1>
    54                              <1> 		
    55 00000231 67C682[97010000]0A  <1> 	mov BYTE[vV_output_buffer + edx] , 0xa
    56 00000239 FFC2                <1> 	inc edx
    57                              <1> 		
    58 0000023B BF01000000          <1> 	mov rdi , 1					;file descriptor, stdout
    59 00000240 B801000000          <1> 	mov rax , 1					; Write sysCall
    60 00000245 0F05                <1> 	syscall
    61                              <1> 	
    62                              <1> 	
    63                              <1> 	
    64 00000247 C3                  <1> 	ret
    65                              <1> 	
    66                              <1> 		
    67                              <1> ;-------------------------------------------------------------------------------
    68                              <1> ;-------------------------------------------------------------------------------
    69                              <1> 	
    70                              <1> vV_io_out_buffer_default:
    71                              <1> 
    72 00000248 448B1425[28010000]  <1> 	mov r10d , DWORD[vV_sys_format_mode]	
    73 00000250 E80F000000          <1> 	call vV_io_out_buffer
    74 00000255 C3                  <1> 	ret
    75                              <1> 	
    76                              <1> vV_io_out_default:
    77                              <1> 
    78 00000256 448B1425[28010000]  <1> 	mov r10d , DWORD[vV_sys_format_mode]	
    79 0000025E E80C000000          <1> 	call vV_io_out
    80 00000263 C3                  <1> 	ret
    81                              <1> 
    82                              <1> ;-------------------------------------------------------------------------------
    83                              <1> ;-------------------------------------------------------------------------------
    84                              <1> 	
    85                              <1> vV_io_out_buffer:				;print str repr of Top Of Stack element
    86                              <1> 						
    87                              <1> 						
    88 00000264 E811000000          <1> 	call vV_io_out01			
    89 00000269 E84A000000          <1> 	call vV_io_out_buffer_end
    90 0000026E C3                  <1> 	ret
    91                              <1> 
    92                              <1> ;-------------------------------------------------------------------------------
    93                              <1> 		
    94                              <1> vV_io_out:					;print str repr of Top Of Stack element
    95                              <1> 
    96                              <1> 
    97 0000026F E806000000          <1> 	call vV_io_out01					
    98 00000274 E826000000          <1> 	call vV_io_out_direct_end
    99 00000279 C3                  <1> 	ret
   100                              <1> 
   101                              <1> ;-------------------------------------------------------------------------------	
   102                              <1> ;-------------------------------------------------------------------------------	
   103                              <1> 
   104                              <1> vV_io_out01:					;print str repr of Top Of Stack element
   105                              <1> 
   106                              <1> 
   107                              <1> 	vV_pop eax				;get value in eax
   107                              <2> 
   107 0000027A 4983EF04            <2>  sub vV_sp , 4
   107 0000027E 418B07              <2>  mov %1 , [vV_sp]
   107                              <2> 
   108                              <1> 	
   109 00000281 BF[97010000]        <1> 	mov edi , vV_output_buffer		;set dest as O_buff
   110 00000286 033C25[93010000]    <1> 	add edi ,DWORD[vV_output_buffer_content]		;set offset to start of freespace
   111                              <1> 	
   112 0000028D 57                  <1> push rdi					;Save buffer origin
   113                              <1> 	
   114 0000028E 41B9FF000000        <1> 	mov r9 , 255				;set Max buffer available	
   115 00000294 4129F9              <1> 	sub r9d , edi				;#TODO: Stop HardCoding VALUES!!!!
   116 00000297 41FFD2              <1> 		call r10			;call current conversion format function
   117 0000029A 4831FF              <1> 	xor rdi , rdi
   118                              <1> 	
   119 0000029D 5F                  <1> pop rdi						;recover Buffer origin
   120                              <1> 	
   121 0000029E C3                  <1> 	ret
   122                              <1> 
   123                              <1> ;-------------------------------------------------------------------------------	
   124                              <1> 	
   125                              <1> vV_io_out_direct_end:
   126                              <1> 
   127                              <1> 
   128                              <1> 
   129 0000029F 67C604070A          <1> 	mov BYTE[edi + eax] , 0xa		;add new_line
   130                              <1> 		
   131 000002A4 FFC0                <1> 		inc eax
   132                              <1> 		
   133 000002A6 89C2                <1> 		mov edx , eax				;string lenght		
   134 000002A8 4889FE              <1> 		mov rsi , rdi				;strng ptr
   135 000002AB BF01000000          <1> 		mov rdi , 1				;file descriptor, stdout
   136 000002B0 B801000000          <1> 		mov rax , 1				; Write sysCall
   137 000002B5 0F05                <1> 		syscall
   138                              <1> 	
   139 000002B7 C3                  <1> 		ret
   140                              <1> 
   141                              <1> ;-------------------------------------------------------------------------------		
   142                              <1> 		
   143                              <1> vV_io_out_buffer_end:
   144                              <1> 
   145 000002B8 010425[93010000]    <1> 	add [vV_output_buffer_content] , eax
   146                              <1> 
   147 000002BF C3                  <1> 	ret
   148                              <1> 
   149                              <1> ;-------------------------------------------------------------------------------
   150                              <1> 
   151                              <1> vV_io_out_char:
   152                              <1> 
   153                              <1> 	
   154 000002C0 E827000000          <1> 	call vV_io_read_char
   155 000002C5 E8D5FFFFFF          <1> 	call vV_io_out_direct_end
   156                              <1> 	
   157 000002CA C3                  <1> 	ret
   158                              <1> 	
   159                              <1> vV_io_out_packed_char:
   160                              <1> 
   161                              <1> 	
   162 000002CB E842000000          <1> 	call vV_io_read_packed_char
   163                              <1> 	
   164 000002D0 E8CAFFFFFF          <1> 	call vV_io_out_direct_end
   165                              <1> 	
   166 000002D5 C3                  <1> 	ret
   167                              <1> 	
   168                              <1> vV_io_out_char_buffer:
   169                              <1> 
   170 000002D6 E811000000          <1> 	call vV_io_read_char
   171                              <1> 	
   172 000002DB E8D8FFFFFF          <1> 	call vV_io_out_buffer_end
   173                              <1> 	
   174 000002E0 C3                  <1> 	ret
   175                              <1> 	
   176                              <1> vV_io_out_packed_char_buffer:
   177                              <1> 
   178 000002E1 E82C000000          <1> 	call vV_io_read_packed_char
   179                              <1> 	
   180 000002E6 E8CDFFFFFF          <1> 	call vV_io_out_buffer_end
   181                              <1> 	
   182 000002EB C3                  <1> 	ret
   183                              <1> 	
   184                              <1> vV_io_read_char:
   185                              <1> 
   186                              <1> 	vV_pop eax
   186                              <2> 
   186 000002EC 4983EF04            <2>  sub vV_sp , 4
   186 000002F0 418B07              <2>  mov %1 , [vV_sp]
   186                              <2> 
   187                              <1> 	
   188 000002F3 48BF-               <1> 	mov rdi , vV_output_buffer
   188 000002F5 [9701000000000000]  <1>
   189 000002FD 033C25[93010000]    <1> 	add edi , [vV_output_buffer_content]
   190                              <1> 	
   191 00000304 678807              <1> 	mov [edi] , al
   192                              <1> 	
   193 00000307 BF[97010000]        <1> 	mov edi , vV_output_buffer
   194 0000030C B801000000          <1> 	mov eax , 1
   195                              <1> 	
   196 00000311 C3                  <1> 	ret	
   197                              <1> 	
   198                              <1> vV_io_read_packed_char:
   199                              <1> 
   200                              <1> 	vV_pop eax
   200                              <2> 
   200 00000312 4983EF04            <2>  sub vV_sp , 4
   200 00000316 418B07              <2>  mov %1 , [vV_sp]
   200                              <2> 
   201                              <1> 	
   202 00000319 48BF-               <1> 	mov rdi , vV_output_buffer
   202 0000031B [9701000000000000]  <1>
   203 00000323 033C25[93010000]    <1> 	add edi , [vV_output_buffer_content]
   204                              <1> 	
   205 0000032A 678907              <1> 	mov [edi] , eax
   206                              <1> 	
   207 0000032D BF[97010000]        <1> 	mov edi , vV_output_buffer
   208 00000332 B804000000          <1> 	mov eax , 4	
   209                              <1> 	
   210 00000337 C3                  <1> 	ret
   211                              <1> 		
   212                              <1> ;-------------------------------------------------------------------------------
   213                              <1> ;-------------------------------------------------------------------------------
   214                              <1> ;-------------------------------------------------------------------------------
   215                              <1> ;-------------------------------------------------------------------------------
   216                              <1> ;-------------------------------------------------------------------------------
   217                              <1> ;-------------------------------------------------------------------------------
   218                              <1> ;-------------------------------------------------------------------------------
   219                              <1> 	
   220                              <1> vV_io_read:
   221                              <1> 
   222                              <1> 								
   223 00000338 48BE-               <1> 		mov rsi , vV_input_buffer		;ptr to string destination	
   223 0000033A [9400000000000000]  <1>
   224 00000342 BAFF000000          <1> 		mov edx , vV_input_buffer_size				;string lenght	
   225 00000347 BF00000000          <1> 		mov rdi , 0				;file descriptor, stdin
   226 0000034C B800000000          <1> 		mov rax , 0				; read sysCall
   227                              <1> 		
   228 00000351 0F05                <1> 		syscall
   229                              <1> 	
   230                              <1> ;-------------Buffer_Overflow_Execption  
   231                              <1> 
   232                              <1> 
   233                              <1> 
   234 00000353 3DFF000000          <1> 		cmp eax , 255				;Check if Buffer Is Full
   235                              <1> 		
   236 00000358 721F                <1> 			jb .no_overflow
   237                              <1> 			
   238 0000035A 803C25[92010000]0A  <1> 		cmp BYTE[vV_input_buffer + vV_input_buffer_size-1] , 0xa	;Check if Buffer end with "\n"
   239                              <1> 		
   240 00000362 7415                <1> 			je .no_overflow
   241                              <1> 		
   242                              <1> 		
   243 00000364 50                  <1> 			push rax
   244 00000365 53                  <1> 			push rbx
   245                              <1> 		
   246 00000366 B401                <1> 			mov ah , vV_ERR_IO_I_OVERFLOW
   247 00000368 6683C800            <1> 			or ax , 0
   248 0000036C 4831DB              <1> 			xor rbx , rbx
   249 0000036F 4889F3              <1> 			mov rbx , rsi
   250                              <1> 		
   251 00000372 E817FDFFFF          <1> 			call vV_error
   252                              <1> 		
   253 00000377 5B                  <1> 			pop rbx
   254 00000378 58                  <1> 			pop rax
   255                              <1> 		
   256                              <1> 			;ret
   257                              <1> 		
   258                              <1> 		.no_overflow:
   259                              <1> 		
   260 00000379 C3                  <1> 			ret
   261                              <1> 		
   262                              <1> 		
   263                              <1> 	
   264                              <1> 	
   265                              <1> vV_io_get_default:
   266                              <1> 
   267 0000037A 41BA[1A040000]      <1> 	mov r10d , vV_ascii_as_dec			;TODO: default settings
   268 00000380 E801000000          <1> 	call vV_io_get
   269 00000385 C3                  <1> 	ret
   270                              <1> 	
   271                              <1> 	
   272                              <1> vV_io_get:						;convert inputed value to 
   273                              <1> 							;32bit int, push it on
   274                              <1> 							;the stack
   275 00000386 E8ADFFFFFF          <1> 	call vV_io_read
   276                              <1> 		
   277                              <1> ;----------------------------------------------	
   278                              <1> 
   279 0000038B 53                  <1> 	push rbx				;Save rbx (conversion uses it) 
   280                              <1> 
   281 0000038C 89C3                <1> 		mov ebx , eax 			;send char count by ebx
   282 0000038E 31FF                <1> 		xor edi , edi 			;zero out counter
   283 00000390 BE[94000000]        <1> 		mov esi , vV_input_buffer	;Set source to I_buffer
   284                              <1> 		
   285                              <1> 
   286 00000395 41FFD2              <1> 		call r10
   287                              <1> 		
   288 00000398 5B                  <1> 	pop rbx
   289                              <1> 	
   290                              <1> 		vV_push eax
   290                              <2> 
   290 00000399 418907              <2>  mov DWORD[vV_sp] , %1
   290 0000039C 4983C704            <2>  add vV_sp , 4
   290                              <2> 
   291                              <1> 		
   292 000003A0 C3                  <1> 		ret
   293                              <1> 
   294                              <1> 
   295                              <1> ;-------------------------------------------------------------------------------
   296                              <1> ;-------------------------------------------------------------------------------
   297                              <1> 
   298                              <1> 
   299                              <1> vV_io_get_char:
   300                              <1> 
   301                              <1> 
   302 000003A1 E892FFFFFF          <1> 	call vV_io_read
   303                              <1> 	
   304 000003A6 31D2                <1> 	xor edx , edx
   305                              <1> 	
   306 000003A8 8A1425[94000000]    <1> 	mov dl , [vV_input_buffer]
   307                              <1> 	
   308                              <1> 	vV_push edx
   308                              <2> 
   308 000003AF 418917              <2>  mov DWORD[vV_sp] , %1
   308 000003B2 4983C704            <2>  add vV_sp , 4
   308                              <2> 
   309                              <1> 	
   310 000003B6 C3                  <1> 	ret
   311                              <1> 	
   312                              <1> vV_io_get_packed_char:
   313                              <1> 
   314 000003B7 C70425[94000000]00- <1> 	mov DWORD [vV_input_buffer] , 0
   314 000003BF 000000              <1>
   315                              <1> 
   316 000003C2 E871FFFFFF          <1> 	call vV_io_read
   317                              <1> 	
   318 000003C7 31D2                <1> 	xor edx , edx
   319                              <1> 	
   320 000003C9 8B1425[94000000]    <1> 	mov edx, [vV_input_buffer]
   321                              <1> 	
   322                              <1> 	vV_push edx
   322                              <2> 
   322 000003D0 418917              <2>  mov DWORD[vV_sp] , %1
   322 000003D3 4983C704            <2>  add vV_sp , 4
   322                              <2> 
   323                              <1> 	
   324 000003D7 C3                  <1> 	ret
   325                              <1> 	
   326                              <1> 		
   327                              <1> 		
   328                              <1> 
   329                              <1> 
   330                              <1> 
     8                                  %include "vVc/assembly/w_runtime/vV_ascii.asm"		
     1                              <1> 
     2                              <1> 
     3                              <1> segment .text 
     4                              <1> 
     5                              <1> 
     6                              <1> 
     7                              <1> 
     8                              <1> vV_ascii_as_hex2:						;Jumped to from parse_num OR called
     9                              <1> 								;use edi as counter/offset in string !Set if direct call
    10                              <1> 								;use esi as source string
    11                              <1> 								;concatenate result in eax
    12                              <1> 								;parse digit in cl
    13                              <1> 								
    14                              <1> 								;use r8 for base
    15                              <1> 								;use r9 for max_value
    16                              <1> 								
    17                              <1> 							
    18                              <1> 	;mov r8 , 16	
    19                              <1> 	
    20                              <1> 	.start_loop:
    21                              <1> 	
    22 000003D8 678A0C3E            <1> 		mov cl , [esi + edi]
    23                              <1> 	
    24                              <1> 		
    25 000003DC 80F930              <1> 		cmp cl , 48
    26                              <1> 		
    27 000003DF 7265                <1> 			jb vV_ascii_unvalid
    28                              <1> 			
    29 000003E1 80F93A              <1> 		cmp cl , 58
    30                              <1> 		
    31 000003E4 720D                <1> 			jb .pass_int
    32                              <1> 			
    33 000003E6 80F966              <1> 			cmp cl , 'f'
    34                              <1> 			
    35 000003E9 775B                <1> 				ja vV_ascii_unvalid
    36                              <1> 			
    37 000003EB 80F961              <1> 			cmp cl , 'a'
    38                              <1> 			
    39 000003EE 7256                <1> 				jb vV_ascii_unvalid
    40                              <1> 				
    41 000003F0 80E927              <1> 			sub cl , 39
    42                              <1> 				
    43                              <1> 			
    44                              <1> 		.pass_int:	
    45                              <1> 			
    46 000003F3 80E930              <1> 		sub cl , '0'
    47                              <1> 		
    48                              <1> 		
    49                              <1> 		
    50 000003F6 31D2                <1> 		xor edx , edx
    51                              <1> 		
    52 000003F8 F8                  <1> 		clc
    53                              <1> 		
    54 000003F9 41F7E0              <1> 		mul r8d
    55                              <1> 		
    56 000003FC 725D                <1> 		jc vV_ascii_overflow
    57                              <1> 		
    58 000003FE 01C8                <1> 		add eax , ecx
    59                              <1> 		
    60                              <1> 		.pass02:
    61                              <1> 		
    62 00000400 FFC7                <1> 		inc edi
    63                              <1> 		
    64 00000402 39DF                <1> 		cmp edi , ebx
    65                              <1> 		
    66 00000404 72D2                <1> 		jb .start_loop
    67                              <1> 
    68                              <1> 		
    69 00000406 C3                  <1> 		ret	
    70                              <1> 		
    71                              <1> 		
    72                              <1> ;
    73                              <1> ;				ebx		esi
    74                              <1> ;	ascii_to_format( buffer_size , buffer_adress ) 
    75                              <1> ;		
    76                              <1> ;
    77                              <1> ;	set:	rcx,rdx (rax) to 0
    78                              <1> ;		r8,r9
    79                              <1> ;		
    80                              <1> ;	call: specialized dexodefunction
    81                              <1> 		
    82                              <1> vV_ascii_as_hex:
    83                              <1> 	
    84 00000407 FFCB                <1> 	dec ebx
    85 00000409 41B810000000        <1> 	mov r8 , 16	
    86 0000040F 4831C0              <1> 	xor rax , rax 		;(just in case not switching from dec mode)			
    87 00000412 4831C9              <1> 	xor rcx , rcx
    88 00000415 4831D2              <1> 	xor rdx , rdx
    89 00000418 EBBE                <1> 	jmp vV_ascii_as_hex2
    90                              <1> 
    91                              <1> vV_ascii_as_dec:
    92                              <1> 
    93 0000041A FFCB                <1> 	dec ebx
    94 0000041C 41B80A000000        <1> 	mov r8 , 10			
    95 00000422 41B93A000000        <1> 	mov r9 , 58
    96 00000428 4831C9              <1> 	xor rcx , rcx
    97 0000042B 4831D2              <1> 	xor rdx , rdx
    98 0000042E EB5E                <1> 	jmp vV_ascii_as_decbin
    99                              <1> 
   100                              <1> vV_ascii_as_bin:
   101                              <1> 
   102 00000430 FFCB                <1> 	dec ebx
   103 00000432 41B802000000        <1> 	mov r8 , 2			
   104 00000438 41B932000000        <1> 	mov r9 , 50
   105 0000043E 4831C9              <1> 	xor rcx , rcx
   106 00000441 4831D2              <1> 	xor rdx , rdx
   107                              <1> 	
   108 00000444 EB48                <1> 	jmp vV_ascii_as_decbin
   109                              <1> 	
   110                              <1> vV_ascii_unvalid:
   111                              <1> 	
   112                              <1> 		;mov rax , 24;	#TODO: Defined Errors code/ data in file
   113                              <1> 		;xor rdx , rdx
   114                              <1> 		;mov dl , cl
   115                              <1> 		
   116                              <1> 		;call w_forced_exit
   117                              <1> 		
   118 00000446 50                  <1> 		push rax
   119 00000447 53                  <1> 		push rbx
   120                              <1> 		
   121 00000448 B403                <1> 		mov ah , vV_ERR_IO_I_UNVALID
   122 0000044A 6683C800            <1> 		or ax , 0
   123 0000044E 4831DB              <1> 		xor rbx , rbx
   124 00000451 88CB                <1> 		mov bl , cl
   125                              <1> 		
   126 00000453 E836FCFFFF          <1> 		call vV_error
   127                              <1> 		
   128 00000458 5B                  <1> 		pop rbx
   129 00000459 58                  <1> 		pop rax
   130                              <1> 		
   131 0000045A C3                  <1> 		ret
   132                              <1> 		
   133                              <1> 		
   134                              <1> 		
   135                              <1> 		
   136                              <1> vV_ascii_overflow:
   137                              <1> 	
   138 0000045B 50                  <1> 		push rax
   139 0000045C 53                  <1> 		push rbx
   140                              <1> 		
   141 0000045D 4831DB              <1> 		xor rbx , rbx
   142 00000460 4889C3              <1> 		mov rbx , rax
   143                              <1> 		
   144                              <1> 		;or rbx , 0x00010000
   145                              <1> 		
   146 00000463 B401                <1> 		mov ah , vV_ERR_IO_I_OVERFLOW
   147 00000465 6683C800            <1> 		or ax , 0
   148                              <1> 		
   149                              <1> 		
   150                              <1> 		
   151 00000469 E820FCFFFF          <1> 		call vV_error
   152                              <1> 		
   153 0000046E 5B                  <1> 		pop rbx
   154 0000046F 58                  <1> 		pop rax
   155                              <1> 		
   156                              <1> 		;TODO: Maybe use vV_error return value for decision making
   157                              <1> 		
   158 00000470 B8FFFFFFFF          <1> 		mov eax , -1
   159                              <1> 		
   160 00000475 C3                  <1> 		ret
   161                              <1> 		
   162                              <1> 		
   163                              <1> vV_ascii_change_to_hex:
   164                              <1> 		
   165 00000476 83F800              <1> 		cmp eax , 0
   166                              <1> 			
   167 00000479 75CB                <1> 			jne vV_ascii_unvalid
   168                              <1> 			
   169 0000047B 41B810000000        <1> 		mov r8 , 16
   170 00000481 4831C9              <1> 		xor rcx , rcx
   171 00000484 4831C0              <1> 		xor rax ,rax
   172                              <1> 				
   173 00000487 FFC7                <1> 		inc edi
   174 00000489 E94AFFFFFF          <1> 		jmp vV_ascii_as_hex2		
   175                              <1> 		
   176                              <1> 	
   177                              <1> 
   178                              <1> 
   179                              <1> vV_ascii_as_decbin:						;ebx: number of char to read
   180                              <1> 
   181                              <1> 	
   182                              <1> 
   183                              <1> 								;use edi as counter/offset in string
   184                              <1> 								;concatenate result in eax
   185                              <1> 								;parse digit in cl
   186                              <1> 								
   187                              <1> 								;use r8 for base
   188                              <1> 								;use r9 for max_value					
   189                              <1> 								;itou
   190                              <1> 	;xor edi, edi			;should be set by caller
   191 0000048E 4831C0              <1> 	xor rax , rax
   192                              <1> 	
   193 00000491 4831C9              <1> 	xor rcx , rcx
   194                              <1> 	
   195 00000494 4831D2              <1> 	xor rdx , rdx
   196                              <1> 	
   197                              <1> 	
   198                              <1> 	.start_loop:
   199                              <1> 	
   200 00000497 678A0C3E            <1> 		mov cl , [esi + edi]
   201                              <1> 		
   202                              <1> 		
   203 0000049B 80F962              <1> 		cmp cl , 'b'										
   204 0000049E 7513                <1> 			jne .pass01
   205                              <1> 		
   206                              <1> 		.format_change:
   207                              <1> 			
   208 000004A0 83F800              <1> 			cmp eax , 0
   209                              <1> 			
   210 000004A3 75A1                <1> 				jne vV_ascii_unvalid
   211                              <1> 				
   212 000004A5 41B802000000        <1> 			mov r8 , 2
   213                              <1> 			
   214 000004AB 41B932000000        <1> 			mov r9 , 50
   215                              <1> 	
   216 000004B1 EB26                <1> 			jmp .pass02
   217                              <1> 		
   218                              <1> 		
   219                              <1> 	
   220                              <1> 		.pass01:
   221                              <1> 		
   222 000004B3 80F968              <1> 		cmp cl , 'h'											
   223 000004B6 74BE                <1> 			je vV_ascii_change_to_hex
   224 000004B8 80F978              <1> 		cmp cl , 'x'											
   225 000004BB 74B9                <1> 			je vV_ascii_change_to_hex
   226                              <1> 			
   227                              <1> 			
   228 000004BD 4438C9              <1> 		cmp cl , r9b
   229                              <1> 		
   230 000004C0 7384                <1> 			jae vV_ascii_unvalid
   231                              <1> 		
   232 000004C2 80F930              <1> 		cmp cl , 48
   233                              <1> 		
   234 000004C5 0F827BFFFFFF        <1> 			jb vV_ascii_unvalid
   235                              <1> 			
   236                              <1> 		
   237                              <1> 			
   238 000004CB 80E930              <1> 		sub cl , 48
   239                              <1> 		
   240 000004CE 4831D2              <1> 		xor rdx , rdx
   241 000004D1 F8                  <1> 		clc
   242                              <1> 		
   243 000004D2 41F7E0              <1> 		mul r8d
   244                              <1> 		
   245 000004D5 7284                <1> 		jc vV_ascii_overflow
   246                              <1> 		
   247 000004D7 01C8                <1> 		add eax , ecx
   248                              <1> 		
   249                              <1> 		.pass02:
   250                              <1> 		
   251 000004D9 FFC7                <1> 		inc edi
   252                              <1> 		
   253 000004DB 39DF                <1> 		cmp edi , ebx
   254                              <1> 		
   255 000004DD 72B8                <1> 		jb .start_loop
   256                              <1> 		
   257                              <1> 		
   258 000004DF C3                  <1> 		ret			; result should be in eax
   259                              <1> 		
   260                              <1> 
   261                              <1> 	
   262                              <1> ;------------------------------------------------------------------------------------------
   263                              <1> ;------------------------------------------------------------------------------------------
   264                              <1> 
   265                              <1> 
   266                              <1> 
   267                              <1> vV_ascii_int_to_hex:					;value in eax
   268                              <1> 						;dest in rdi
   269                              <1> 
   270                              <1> 
   271                              <1> 
   272 000004E0 31C9                <1> 	xor ecx , ecx	
   273                              <1> 	
   274 000004E2 BE10000000          <1> 	mov esi , 16
   275                              <1> 
   276                              <1> 	
   277                              <1> 	.loop01:
   278                              <1> 	
   279 000004E7 4831D2              <1> 		xor rdx , rdx
   280                              <1> 		
   281 000004EA F7F6                <1> 		div esi
   282                              <1> 		
   283                              <1> 		
   284 000004EC 80FA0A              <1> 		cmp dl , 10
   285                              <1> 		
   286 000004EF 7203                <1> 		jb .dec
   287                              <1> 		
   288 000004F1 80C207              <1> 			add dl , 7
   289                              <1> 		
   290                              <1> 		.dec:
   291                              <1> 		
   292 000004F4 80C230              <1> 			add dl , '0'
   293                              <1> 		
   294                              <1> 		
   295 000004F7 52                  <1> 		push rdx
   296                              <1> 		
   297 000004F8 FFC1                <1> 		inc ecx
   298                              <1> 		
   299 000004FA 39F0                <1> 		cmp eax , esi
   300                              <1> 		
   301 000004FC 73E9                <1> 		jae .loop01
   302                              <1> 	
   303                              <1> 	
   304 000004FE 3C0A                <1> 	cmp al , 10
   305                              <1> 		
   306 00000500 7202                <1> 		jb .dec2
   307                              <1> 		
   308 00000502 0407                <1> 			add al , 7
   309                              <1> 		
   310                              <1> 		.dec2:
   311                              <1> 		
   312 00000504 0430                <1> 			add al , '0'	
   313 00000506 8807                <1> 	mov [rdi] , al
   314                              <1> 	
   315 00000508 EB1B                <1> 	jmp vV_ascii_pop_digits
   316                              <1> 		
   317                              <1> 	
   318                              <1> 	
   319                              <1> 	
   320                              <1> vV_ascii_int_to_dec:					;value in eax
   321                              <1> 						;dest in rdi
   322                              <1> 						;max_dest_size in r9d
   323                              <1> 
   324                              <1> 
   325                              <1> 
   326 0000050A 31C9                <1> 	xor ecx , ecx	
   327                              <1> 	
   328 0000050C BE0A000000          <1> 	mov esi , 10
   329                              <1> 	
   330                              <1> 
   331                              <1> 
   332                              <1> 	
   333                              <1> 	.loop01:
   334                              <1> 	
   335 00000511 4831D2              <1> 		xor rdx , rdx
   336                              <1> 		
   337 00000514 F7F6                <1> 		div esi
   338                              <1> 		
   339                              <1> 		
   340 00000516 80C230              <1> 		add dl , '0'
   341 00000519 52                  <1> 		push rdx
   342                              <1> 		
   343 0000051A FFC1                <1> 		inc ecx
   344                              <1> 		
   345 0000051C 83F80A              <1> 		cmp eax , 10
   346                              <1> 		
   347 0000051F 73F0                <1> 		jae .loop01
   348                              <1> 	
   349 00000521 0430                <1> 	add al , '0'	
   350 00000523 8807                <1> 	mov [rdi] , al
   351                              <1> 		
   352                              <1> 	
   353                              <1> 		
   354                              <1> vV_ascii_pop_digits:			; Need nb of digits currently on stack(ecx)
   355                              <1> 						;dest in rdi
   356 00000525 41B801000000        <1> 		mov r8d , 1
   357 0000052B FFC1                <1> 		inc ecx
   358                              <1> 		
   359 0000052D 4439C9              <1> 		cmp ecx , r9d
   360                              <1> 		
   361 00000530 7219                <1> 		jb .loopstart
   362                              <1> 		
   363                              <1> 	
   364 00000532 50                  <1> 			push rax
   365 00000533 53                  <1> 			push rbx
   366                              <1> 		
   367 00000534 B410                <1> 			mov ah , vV_ERR_MEMORY_BUFFER_LIMIT
   368 00000536 6683C800            <1> 			or ax , 0
   369 0000053A 4831DB              <1> 			xor rbx , rbx
   370 0000053D 89FB                <1> 			mov ebx , edi
   371                              <1> 		
   372 0000053F E84AFBFFFF          <1> 			call vV_error
   373                              <1> 		
   374 00000544 5B                  <1> 			pop rbx
   375 00000545 58                  <1> 			pop rax
   376                              <1> 			
   377 00000546 4489C9              <1> 			mov ecx , r9d		;Should protect memory..
   378 00000549 FFC9                <1> 			dec ecx		;will need testing
   379                              <1> 		
   380                              <1> 						
   381                              <1> 		.loopstart:
   382                              <1> 		
   383 0000054B 5A                  <1> 			pop rdx
   384 0000054C 6742881407          <1> 			mov BYTE[edi + r8d] , dl
   385 00000551 41FFC0              <1> 			inc r8d
   386                              <1> 			
   387 00000554 4139C8              <1> 			cmp r8d , ecx
   388                              <1> 		
   389 00000557 72F2                <1> 		jb .loopstart
   390                              <1> 	
   391                              <1> 	
   392 00000559 89C8                <1> 		mov eax , ecx
   393                              <1> 		
   394 0000055B C3                  <1> 		ret	
   395                              <1> 	
   396                              <1> 	
   397                              <1> vV_ascii_int_to_bin:					;value in eax, 
   398                              <1> 							
   399                              <1> 
   400                              <1> 
   401 0000055C 31C9                <1> 	xor ecx , ecx
   402                              <1> 	
   403                              <1> 	
   404                              <1> 	.loop01:
   405                              <1> 	
   406                              <1> 		
   407 0000055E D1E8                <1> 		shr eax , 1
   408                              <1> 		
   409 00000560 7205                <1> 		jc .one
   410                              <1> 		
   411 00000562 B230                <1> 			mov dl , '0'
   412 00000564 52                  <1> 			push rdx
   413                              <1> 			
   414 00000565 EB03                <1> 		jmp .next
   415                              <1> 		.one:
   416                              <1> 			
   417 00000567 B231                <1> 			mov dl , '1'
   418 00000569 52                  <1> 			push rdx
   419                              <1> 		
   420                              <1> 		.next:
   421                              <1> 		
   422 0000056A FFC1                <1> 		inc ecx
   423                              <1> 		
   424 0000056C 83F801              <1> 		cmp eax , 1
   425                              <1> 		
   426 0000056F 77ED                <1> 		ja .loop01
   427                              <1> 	
   428 00000571 0430                <1> 	add al , '0'	
   429 00000573 8807                <1> 	mov [rdi] , al
   430                              <1> 	
   431 00000575 EBAE                <1> 	jmp vV_ascii_pop_digits
   432                              <1> 	
   433                              <1> 	
   434                              <1> ;Will need a special version for String stack
   435                              <1> 
   436                              <1> 
   437                              <1> 
   438                              <1> 
   439                              <1> 
   440                              <1> 
   441                              <1> 
     9                                  %include "w_samples/assembly/helloworld_vars.was"	
     1                              <1>  segment .bss
     2                              <1> 	u_global_demo6:
     3 00000296 <res 00000004>      <1> .c:resb 4 
     4                              <1> 	u_global:
     5                              <1>  segment .data
     6                              <1> 	i_global_demo6:
     7 0000012C A401000000000000    <1> .a:dq 420
     8 00000134 4500000000000000    <1> .b:dq 69
     9                              <1> 	i_global:
    10 0000013C 0C00000000000000    <1> .a:dq 12
    11 00000144 2A00000000000000    <1> .b:dq 42
    12 0000014C 0B0000001F00000015- <1> .sizes: dd  11 , 31 , 21 , 26 , 48 , 35 
    12 00000155 0000001A0000003000- <1>
    12 0000015E 000023000000        <1>
    13 00000164 616E64207061737369- <1> .line5:db "and passing string type as argument"
    13 0000016D 6E6720737472696E67- <1>
    13 00000176 207479706520617320- <1>
    13 0000017F 617267756D656E74    <1>
    14 00000187 746F20616C6C6F7720- <1> .line4:db "to allow storing different sized Stings in array"
    14 00000190 73746F72696E672064- <1>
    14 00000199 6966666572656E7420- <1>
    14 000001A2 73697A656420537469- <1>
    14 000001AB 6E677320696E206172- <1>
    14 000001B4 726179              <1>
    15 000001B7 6E6578742069732061- <1> .line3:db "next is a real String type"
    15 000001C0 207265616C20537472- <1>
    15 000001C9 696E672074797065    <1>
    16 000001D1 616E6420696E697469- <1> .line2:db "and initialized Array"
    16 000001DA 616C697A6564204172- <1>
    16 000001E3 726179              <1>
    17 000001E6 7656206E6F77207375- <1> .line1:db "vV now support String Litterals"
    17 000001EF 70706F727420537472- <1>
    17 000001F8 696E67204C69747465- <1>
    17 00000201 72616C73            <1>
    18 00000205 48656C6C6F20576F72- <1> .str:db "Hello World"
    18 0000020E 6C64                <1>
    10                                  %include "vVc/assembly/w_runtime/vV_system90.asm"		
     1                              <1> 
     2                              <1> segment .bss
     3                              <1> 
     4                              <1> 	
     5                              <1> 	
     6                              <1> 	stacks: 
     7                              <1> 
     8                              <1> 
     9 0000029A <res 00040000>      <1> 	string_stack_start: resb 262144
    10                              <1> 
    11                              <1> 
    12                              <1> 	
    13                              <1> 	
    14                              <1> 						
    15 0004029A <res 00020000>      <1> 	fake_stack_start: resb 131072
    11                                  
    12                                  
    13                                  
    14                                  global w_entry_point
    15                                  
    16                                  
    17                                  
    18                                  segment .text 
    19                                  
    20                                  
    21                                  demo6_truc:		
    22 00000577 55                      	push rbp	
    23 00000578 4889E5                  	mov rbp , rsp	
    24                                  
    25                                  ;------Setup Phase
    26                                  
    27                                  ;------Init Phase
    28                                  
    29                                  .tailcall:		;Body Section	
    30                                  ;OpADR: [0] ; Var invocation
    31                                  
    32 0000057B 4831C0                  		xor rax , rax
    33 0000057E 488D7D10                	lea rdi , [rbp + 16]	
    34 00000582 4801C7                  	add rdi , rax	
    35 00000585 8B07                    	mov eax , [rdi] 
    36 00000587 8B00                    	mov eax , [rax]	
    37                                  	vV_push eax	
    37                              <1> 
    37 00000589 418907              <1>  mov DWORD[vV_sp] , %1
    37 0000058C 4983C704            <1>  add vV_sp , 4
    37                              <1> 
    38                                  
    39                                  ;OpADR: [1] ; BUFF_OUT opcode (0)
    40                                  
    41 00000590 E8C1FCFFFF              	 call vV_io_out_default	
    42                                  
    43                                  ;OpADR: [2] ; End of func opcode
    44                                  
    45                                  	
    46                                  ;------Cleanup Phase
    47                                  
    48                                  ;------frame restore Phase
    49 00000595 4889EC                  	mov rsp , rbp	
    50 00000598 5D                      	pop rbp	
    51 00000599 C3                      	ret	
    52                                  
    53                                  
    54                                  		
    55                                  
    56                                  
    57                                  
    58                                  vV_entry_point:
    59                                  
    60                                  
    61 0000059A 55                      	push rbp
    62 0000059B 4889E5                  	mov rbp, rsp			;Setup Stack Frame
    63                                  	
    64                                  	;OpADR: [0] ; Function Call with args
    65                                  
    66 0000059E 4831C0                  		xor rax , rax
    67 000005A1 488D3C25[3C010000]      	lea rdi , [i_global.a]	
    68 000005A9 4889FE                  	mov rsi , rdi	
    69 000005AC 4801C6                  	add rsi , rax	
    70 000005AF 50                      	push rax	
    71 000005B0 4889E7                  	mov rdi , rsp	
    72 000005B3 4889F0                  	mov  rax , rsi	
    73 000005B6 8907                    	mov [rdi] , eax	
    74 000005B8 E8BAFFFFFF              	call demo6_truc
    75 000005BD 4883C408                add rsp , 8
    76                                  ;OpADR: [1] ; Var invocation
    77                                  
    78 000005C1 4831C0                  		xor rax , rax
    79 000005C4 488D3C25[2C010000]      	lea rdi , [i_global_demo6.a]	
    80 000005CC 4801C7                  	add rdi , rax	
    81 000005CF 8B07                    	mov eax , [rdi]	
    82                                  	vV_push eax	
    82                              <1> 
    82 000005D1 418907              <1>  mov DWORD[vV_sp] , %1
    82 000005D4 4983C704            <1>  add vV_sp , 4
    82                              <1> 
    83                                  
    84                                  ;OpADR: [2] ; BUFF_OUT opcode (0)
    85                                  
    86 000005D8 E879FCFFFF              	 call vV_io_out_default	
    87                                  
    88                                  ;OpADR: [3] ; PUSH opcode 
    89                                  
    90                                  	vV_push 0
    90                              <1> 
    90 000005DD 41C70700000000      <1>  mov DWORD[vV_sp] , %1
    90 000005E4 4983C704            <1>  add vV_sp , 4
    90                              <1> 
    91                                  
    92                                  ;OpADR: [4] ; Var invocation
    93                                  
    94 000005E8 488D3C25[4C010000]      		lea rdi , [i_global.sizes]	
    95 000005F0 4831C0                  	xor rax , rax	
    96                                  	vV_pop ecx	
    96                              <1> 
    96 000005F3 4983EF04            <1>  sub vV_sp , 4
    96 000005F7 418B0F              <1>  mov %1 , [vV_sp]
    96                              <1> 
    97 000005FA 83F906                  	cmp ecx , 6	
    98 000005FD 0F8DA7FAFFFF            	jge vV_bound_error	
    99 00000603 01C8                    	add eax , ecx	
   100 00000605 C1E002                  	shl eax , 2	
   101 00000608 4801C7                  	add rdi , rax	
   102 0000060B 8B07                    	mov eax , [rdi]	
   103                                  	vV_push eax	
   103                              <1> 
   103 0000060D 418907              <1>  mov DWORD[vV_sp] , %1
   103 00000610 4983C704            <1>  add vV_sp , 4
   103                              <1> 
   104                                  
   105                                  ;OpADR: [5] ; PUSH opcode 
   106                                  
   107                                  	vV_push 0
   107                              <1> 
   107 00000614 41C70700000000      <1>  mov DWORD[vV_sp] , %1
   107 0000061B 4983C704            <1>  add vV_sp , 4
   107                              <1> 
   108                                  
   109                                  ;OpADR: [6] ; Loop check 
   110                                  
   111                                  		vV_pop eax	;get index
   111                              <1> 
   111 0000061F 4983EF04            <1>  sub vV_sp , 4
   111 00000623 418B07              <1>  mov %1 , [vV_sp]
   111                              <1> 
   112 00000626 50                      	push rax	
   113                                  	vV_pop eax	;get limit
   113                              <1> 
   113 00000627 4983EF04            <1>  sub vV_sp , 4
   113 0000062B 418B07              <1>  mov %1 , [vV_sp]
   113                              <1> 
   114 0000062E 50                      	push rax	
   115                                  
   116                                  
   117                                  
   118                                  	wblock_helloworld0:		
   119                                  
   120                                  ;------------------------------------------------------
   121                                  
   122                                  ;OpADR: [7] ; Var invocation
   123                                  
   124 0000062F 4831C0                  		xor rax , rax
   125 00000632 488D7C2408              	lea rdi , [rsp+8]	
   126 00000637 4801C7                  	add rdi , rax	
   127 0000063A 8B07                    	mov eax , [rdi] 
   128                                  	vV_push eax	
   128                              <1> 
   128 0000063C 418907              <1>  mov DWORD[vV_sp] , %1
   128 0000063F 4983C704            <1>  add vV_sp , 4
   128                              <1> 
   129                                  
   130                                  ;OpADR: [8] ; Var invocation
   131                                  
   132 00000643 488D3C25[05020000]      		lea rdi , [i_global.str]	
   133 0000064B 4831C0                  	xor rax , rax	
   134                                  	vV_pop ecx	
   134                              <1> 
   134 0000064E 4983EF04            <1>  sub vV_sp , 4
   134 00000652 418B0F              <1>  mov %1 , [vV_sp]
   134                              <1> 
   135 00000655 83F90B                  	cmp ecx , 11	
   136 00000658 0F8D4CFAFFFF            	jge vV_bound_error	
   137 0000065E 01C8                    	add eax , ecx	
   138 00000660 4801C7                  	add rdi , rax	
   139 00000663 8A07                    	mov al , [rdi]	
   140                                  	vV_push eax	
   140                              <1> 
   140 00000665 418907              <1>  mov DWORD[vV_sp] , %1
   140 00000668 4983C704            <1>  add vV_sp , 4
   140                              <1> 
   141                                  
   142                                  ;OpADR: [9] ; OUT opcode (8)
   143                                  
   144 0000066C E865FCFFFF              	call vV_io_out_char_buffer
   145                                  
   146                                  ;OpADR: [10] ; ; Loop init 
   147                                  
   148 00000671 FF442408                		inc DWORD[rsp + 8]
   149 00000675 488B442408              	mov rax , [rsp + 8]	;get index
   150 0000067A 488B0C24                	mov rcx , [rsp]	;get max
   151 0000067E 39C8                    	cmp eax , ecx	
   152 00000680 72AD                    	jb wblock_helloworld0	
   153                                  
   154                                  
   155                                  
   156                                  	wblock_helloworld1:		
   157                                  
   158                                  ;------------------------------------------------------
   159                                  
   160                                  ;OpADR: [11] ; Loop Cleanup 
   161                                  
   162 00000682 4883C410                	add rsp , 16	
   163                                  
   164                                  ;OpADR: [12] ; FLUSH opcode
   165                                  
   166 00000686 E88AFBFFFF              	call vV_io_flush 
   167                                  
   168                                  ;OpADR: [13] ; FLUSH opcode
   169                                  
   170 0000068B E885FBFFFF              	call vV_io_flush 
   171                                  
   172                                  ;OpADR: [14] ; PUSH opcode 
   173                                  
   174                                  	vV_push 1
   174                              <1> 
   174 00000690 41C70701000000      <1>  mov DWORD[vV_sp] , %1
   174 00000697 4983C704            <1>  add vV_sp , 4
   174                              <1> 
   175                                  
   176                                  ;OpADR: [15] ; Var invocation
   177                                  
   178 0000069B 488D3C25[4C010000]      		lea rdi , [i_global.sizes]	
   179 000006A3 4831C0                  	xor rax , rax	
   180                                  	vV_pop ecx	
   180                              <1> 
   180 000006A6 4983EF04            <1>  sub vV_sp , 4
   180 000006AA 418B0F              <1>  mov %1 , [vV_sp]
   180                              <1> 
   181 000006AD 83F906                  	cmp ecx , 6	
   182 000006B0 0F8DF4F9FFFF            	jge vV_bound_error	
   183 000006B6 01C8                    	add eax , ecx	
   184 000006B8 C1E002                  	shl eax , 2	
   185 000006BB 4801C7                  	add rdi , rax	
   186 000006BE 8B07                    	mov eax , [rdi]	
   187                                  	vV_push eax	
   187                              <1> 
   187 000006C0 418907              <1>  mov DWORD[vV_sp] , %1
   187 000006C3 4983C704            <1>  add vV_sp , 4
   187                              <1> 
   188                                  
   189                                  ;OpADR: [16] ; PUSH opcode 
   190                                  
   191                                  	vV_push 0
   191                              <1> 
   191 000006C7 41C70700000000      <1>  mov DWORD[vV_sp] , %1
   191 000006CE 4983C704            <1>  add vV_sp , 4
   191                              <1> 
   192                                  
   193                                  ;OpADR: [17] ; Loop check 
   194                                  
   195                                  		vV_pop eax	;get index
   195                              <1> 
   195 000006D2 4983EF04            <1>  sub vV_sp , 4
   195 000006D6 418B07              <1>  mov %1 , [vV_sp]
   195                              <1> 
   196 000006D9 50                      	push rax	
   197                                  	vV_pop eax	;get limit
   197                              <1> 
   197 000006DA 4983EF04            <1>  sub vV_sp , 4
   197 000006DE 418B07              <1>  mov %1 , [vV_sp]
   197                              <1> 
   198 000006E1 50                      	push rax	
   199                                  
   200                                  
   201                                  
   202                                  	wblock_helloworld2:		
   203                                  
   204                                  ;------------------------------------------------------
   205                                  
   206                                  ;OpADR: [18] ; Var invocation
   207                                  
   208 000006E2 4831C0                  		xor rax , rax
   209 000006E5 488D7C2408              	lea rdi , [rsp+8]	
   210 000006EA 4801C7                  	add rdi , rax	
   211 000006ED 8B07                    	mov eax , [rdi] 
   212                                  	vV_push eax	
   212                              <1> 
   212 000006EF 418907              <1>  mov DWORD[vV_sp] , %1
   212 000006F2 4983C704            <1>  add vV_sp , 4
   212                              <1> 
   213                                  
   214                                  ;OpADR: [19] ; Var invocation
   215                                  
   216 000006F6 488D3C25[E6010000]      		lea rdi , [i_global.line1]	
   217 000006FE 4831C0                  	xor rax , rax	
   218                                  	vV_pop ecx	
   218                              <1> 
   218 00000701 4983EF04            <1>  sub vV_sp , 4
   218 00000705 418B0F              <1>  mov %1 , [vV_sp]
   218                              <1> 
   219 00000708 83F91F                  	cmp ecx , 31	
   220 0000070B 0F8D99F9FFFF            	jge vV_bound_error	
   221 00000711 01C8                    	add eax , ecx	
   222 00000713 4801C7                  	add rdi , rax	
   223 00000716 8A07                    	mov al , [rdi]	
   224                                  	vV_push eax	
   224                              <1> 
   224 00000718 418907              <1>  mov DWORD[vV_sp] , %1
   224 0000071B 4983C704            <1>  add vV_sp , 4
   224                              <1> 
   225                                  
   226                                  ;OpADR: [20] ; OUT opcode (8)
   227                                  
   228 0000071F E8B2FBFFFF              	call vV_io_out_char_buffer
   229                                  
   230                                  ;OpADR: [21] ; ; Loop init 
   231                                  
   232 00000724 FF442408                		inc DWORD[rsp + 8]
   233 00000728 488B442408              	mov rax , [rsp + 8]	;get index
   234 0000072D 488B0C24                	mov rcx , [rsp]	;get max
   235 00000731 39C8                    	cmp eax , ecx	
   236 00000733 72AD                    	jb wblock_helloworld2	
   237                                  
   238                                  
   239                                  
   240                                  	wblock_helloworld3:		
   241                                  
   242                                  ;------------------------------------------------------
   243                                  
   244                                  ;OpADR: [22] ; Loop Cleanup 
   245                                  
   246 00000735 4883C410                	add rsp , 16	
   247                                  
   248                                  ;OpADR: [23] ; FLUSH opcode
   249                                  
   250 00000739 E8D7FAFFFF              	call vV_io_flush 
   251                                  
   252                                  ;OpADR: [24] ; PUSH opcode 
   253                                  
   254                                  	vV_push 2
   254                              <1> 
   254 0000073E 41C70702000000      <1>  mov DWORD[vV_sp] , %1
   254 00000745 4983C704            <1>  add vV_sp , 4
   254                              <1> 
   255                                  
   256                                  ;OpADR: [25] ; Var invocation
   257                                  
   258 00000749 488D3C25[4C010000]      		lea rdi , [i_global.sizes]	
   259 00000751 4831C0                  	xor rax , rax	
   260                                  	vV_pop ecx	
   260                              <1> 
   260 00000754 4983EF04            <1>  sub vV_sp , 4
   260 00000758 418B0F              <1>  mov %1 , [vV_sp]
   260                              <1> 
   261 0000075B 83F906                  	cmp ecx , 6	
   262 0000075E 0F8D46F9FFFF            	jge vV_bound_error	
   263 00000764 01C8                    	add eax , ecx	
   264 00000766 C1E002                  	shl eax , 2	
   265 00000769 4801C7                  	add rdi , rax	
   266 0000076C 8B07                    	mov eax , [rdi]	
   267                                  	vV_push eax	
   267                              <1> 
   267 0000076E 418907              <1>  mov DWORD[vV_sp] , %1
   267 00000771 4983C704            <1>  add vV_sp , 4
   267                              <1> 
   268                                  
   269                                  ;OpADR: [26] ; PUSH opcode 
   270                                  
   271                                  	vV_push 0
   271                              <1> 
   271 00000775 41C70700000000      <1>  mov DWORD[vV_sp] , %1
   271 0000077C 4983C704            <1>  add vV_sp , 4
   271                              <1> 
   272                                  
   273                                  ;OpADR: [27] ; Loop check 
   274                                  
   275                                  		vV_pop eax	;get index
   275                              <1> 
   275 00000780 4983EF04            <1>  sub vV_sp , 4
   275 00000784 418B07              <1>  mov %1 , [vV_sp]
   275                              <1> 
   276 00000787 50                      	push rax	
   277                                  	vV_pop eax	;get limit
   277                              <1> 
   277 00000788 4983EF04            <1>  sub vV_sp , 4
   277 0000078C 418B07              <1>  mov %1 , [vV_sp]
   277                              <1> 
   278 0000078F 50                      	push rax	
   279                                  
   280                                  
   281                                  
   282                                  	wblock_helloworld4:		
   283                                  
   284                                  ;------------------------------------------------------
   285                                  
   286                                  ;OpADR: [28] ; Var invocation
   287                                  
   288 00000790 4831C0                  		xor rax , rax
   289 00000793 488D7C2408              	lea rdi , [rsp+8]	
   290 00000798 4801C7                  	add rdi , rax	
   291 0000079B 8B07                    	mov eax , [rdi] 
   292                                  	vV_push eax	
   292                              <1> 
   292 0000079D 418907              <1>  mov DWORD[vV_sp] , %1
   292 000007A0 4983C704            <1>  add vV_sp , 4
   292                              <1> 
   293                                  
   294                                  ;OpADR: [29] ; Var invocation
   295                                  
   296 000007A4 488D3C25[D1010000]      		lea rdi , [i_global.line2]	
   297 000007AC 4831C0                  	xor rax , rax	
   298                                  	vV_pop ecx	
   298                              <1> 
   298 000007AF 4983EF04            <1>  sub vV_sp , 4
   298 000007B3 418B0F              <1>  mov %1 , [vV_sp]
   298                              <1> 
   299 000007B6 83F915                  	cmp ecx , 21	
   300 000007B9 0F8DEBF8FFFF            	jge vV_bound_error	
   301 000007BF 01C8                    	add eax , ecx	
   302 000007C1 4801C7                  	add rdi , rax	
   303 000007C4 8A07                    	mov al , [rdi]	
   304                                  	vV_push eax	
   304                              <1> 
   304 000007C6 418907              <1>  mov DWORD[vV_sp] , %1
   304 000007C9 4983C704            <1>  add vV_sp , 4
   304                              <1> 
   305                                  
   306                                  ;OpADR: [30] ; OUT opcode (8)
   307                                  
   308 000007CD E804FBFFFF              	call vV_io_out_char_buffer
   309                                  
   310                                  ;OpADR: [31] ; ; Loop init 
   311                                  
   312 000007D2 FF442408                		inc DWORD[rsp + 8]
   313 000007D6 488B442408              	mov rax , [rsp + 8]	;get index
   314 000007DB 488B0C24                	mov rcx , [rsp]	;get max
   315 000007DF 39C8                    	cmp eax , ecx	
   316 000007E1 72AD                    	jb wblock_helloworld4	
   317                                  
   318                                  
   319                                  
   320                                  	wblock_helloworld5:		
   321                                  
   322                                  ;------------------------------------------------------
   323                                  
   324                                  ;OpADR: [32] ; Loop Cleanup 
   325                                  
   326 000007E3 4883C410                	add rsp , 16	
   327                                  
   328                                  ;OpADR: [33] ; FLUSH opcode
   329                                  
   330 000007E7 E829FAFFFF              	call vV_io_flush 
   331                                  
   332                                  ;OpADR: [34] ; PUSH opcode 
   333                                  
   334                                  	vV_push 3
   334                              <1> 
   334 000007EC 41C70703000000      <1>  mov DWORD[vV_sp] , %1
   334 000007F3 4983C704            <1>  add vV_sp , 4
   334                              <1> 
   335                                  
   336                                  ;OpADR: [35] ; Var invocation
   337                                  
   338 000007F7 488D3C25[4C010000]      		lea rdi , [i_global.sizes]	
   339 000007FF 4831C0                  	xor rax , rax	
   340                                  	vV_pop ecx	
   340                              <1> 
   340 00000802 4983EF04            <1>  sub vV_sp , 4
   340 00000806 418B0F              <1>  mov %1 , [vV_sp]
   340                              <1> 
   341 00000809 83F906                  	cmp ecx , 6	
   342 0000080C 0F8D98F8FFFF            	jge vV_bound_error	
   343 00000812 01C8                    	add eax , ecx	
   344 00000814 C1E002                  	shl eax , 2	
   345 00000817 4801C7                  	add rdi , rax	
   346 0000081A 8B07                    	mov eax , [rdi]	
   347                                  	vV_push eax	
   347                              <1> 
   347 0000081C 418907              <1>  mov DWORD[vV_sp] , %1
   347 0000081F 4983C704            <1>  add vV_sp , 4
   347                              <1> 
   348                                  
   349                                  ;OpADR: [36] ; PUSH opcode 
   350                                  
   351                                  	vV_push 0
   351                              <1> 
   351 00000823 41C70700000000      <1>  mov DWORD[vV_sp] , %1
   351 0000082A 4983C704            <1>  add vV_sp , 4
   351                              <1> 
   352                                  
   353                                  ;OpADR: [37] ; Loop check 
   354                                  
   355                                  		vV_pop eax	;get index
   355                              <1> 
   355 0000082E 4983EF04            <1>  sub vV_sp , 4
   355 00000832 418B07              <1>  mov %1 , [vV_sp]
   355                              <1> 
   356 00000835 50                      	push rax	
   357                                  	vV_pop eax	;get limit
   357                              <1> 
   357 00000836 4983EF04            <1>  sub vV_sp , 4
   357 0000083A 418B07              <1>  mov %1 , [vV_sp]
   357                              <1> 
   358 0000083D 50                      	push rax	
   359                                  
   360                                  
   361                                  
   362                                  	wblock_helloworld6:		
   363                                  
   364                                  ;------------------------------------------------------
   365                                  
   366                                  ;OpADR: [38] ; Var invocation
   367                                  
   368 0000083E 4831C0                  		xor rax , rax
   369 00000841 488D7C2408              	lea rdi , [rsp+8]	
   370 00000846 4801C7                  	add rdi , rax	
   371 00000849 8B07                    	mov eax , [rdi] 
   372                                  	vV_push eax	
   372                              <1> 
   372 0000084B 418907              <1>  mov DWORD[vV_sp] , %1
   372 0000084E 4983C704            <1>  add vV_sp , 4
   372                              <1> 
   373                                  
   374                                  ;OpADR: [39] ; Var invocation
   375                                  
   376 00000852 488D3C25[B7010000]      		lea rdi , [i_global.line3]	
   377 0000085A 4831C0                  	xor rax , rax	
   378                                  	vV_pop ecx	
   378                              <1> 
   378 0000085D 4983EF04            <1>  sub vV_sp , 4
   378 00000861 418B0F              <1>  mov %1 , [vV_sp]
   378                              <1> 
   379 00000864 83F91A                  	cmp ecx , 26	
   380 00000867 0F8D3DF8FFFF            	jge vV_bound_error	
   381 0000086D 01C8                    	add eax , ecx	
   382 0000086F 4801C7                  	add rdi , rax	
   383 00000872 8A07                    	mov al , [rdi]	
   384                                  	vV_push eax	
   384                              <1> 
   384 00000874 418907              <1>  mov DWORD[vV_sp] , %1
   384 00000877 4983C704            <1>  add vV_sp , 4
   384                              <1> 
   385                                  
   386                                  ;OpADR: [40] ; OUT opcode (8)
   387                                  
   388 0000087B E856FAFFFF              	call vV_io_out_char_buffer
   389                                  
   390                                  ;OpADR: [41] ; ; Loop init 
   391                                  
   392 00000880 FF442408                		inc DWORD[rsp + 8]
   393 00000884 488B442408              	mov rax , [rsp + 8]	;get index
   394 00000889 488B0C24                	mov rcx , [rsp]	;get max
   395 0000088D 39C8                    	cmp eax , ecx	
   396 0000088F 72AD                    	jb wblock_helloworld6	
   397                                  
   398                                  
   399                                  
   400                                  	wblock_helloworld7:		
   401                                  
   402                                  ;------------------------------------------------------
   403                                  
   404                                  ;OpADR: [42] ; Loop Cleanup 
   405                                  
   406 00000891 4883C410                	add rsp , 16	
   407                                  
   408                                  ;OpADR: [43] ; FLUSH opcode
   409                                  
   410 00000895 E87BF9FFFF              	call vV_io_flush 
   411                                  
   412                                  ;OpADR: [44] ; PUSH opcode 
   413                                  
   414                                  	vV_push 4
   414                              <1> 
   414 0000089A 41C70704000000      <1>  mov DWORD[vV_sp] , %1
   414 000008A1 4983C704            <1>  add vV_sp , 4
   414                              <1> 
   415                                  
   416                                  ;OpADR: [45] ; Var invocation
   417                                  
   418 000008A5 488D3C25[4C010000]      		lea rdi , [i_global.sizes]	
   419 000008AD 4831C0                  	xor rax , rax	
   420                                  	vV_pop ecx	
   420                              <1> 
   420 000008B0 4983EF04            <1>  sub vV_sp , 4
   420 000008B4 418B0F              <1>  mov %1 , [vV_sp]
   420                              <1> 
   421 000008B7 83F906                  	cmp ecx , 6	
   422 000008BA 0F8DEAF7FFFF            	jge vV_bound_error	
   423 000008C0 01C8                    	add eax , ecx	
   424 000008C2 C1E002                  	shl eax , 2	
   425 000008C5 4801C7                  	add rdi , rax	
   426 000008C8 8B07                    	mov eax , [rdi]	
   427                                  	vV_push eax	
   427                              <1> 
   427 000008CA 418907              <1>  mov DWORD[vV_sp] , %1
   427 000008CD 4983C704            <1>  add vV_sp , 4
   427                              <1> 
   428                                  
   429                                  ;OpADR: [46] ; PUSH opcode 
   430                                  
   431                                  	vV_push 0
   431                              <1> 
   431 000008D1 41C70700000000      <1>  mov DWORD[vV_sp] , %1
   431 000008D8 4983C704            <1>  add vV_sp , 4
   431                              <1> 
   432                                  
   433                                  ;OpADR: [47] ; Loop check 
   434                                  
   435                                  		vV_pop eax	;get index
   435                              <1> 
   435 000008DC 4983EF04            <1>  sub vV_sp , 4
   435 000008E0 418B07              <1>  mov %1 , [vV_sp]
   435                              <1> 
   436 000008E3 50                      	push rax	
   437                                  	vV_pop eax	;get limit
   437                              <1> 
   437 000008E4 4983EF04            <1>  sub vV_sp , 4
   437 000008E8 418B07              <1>  mov %1 , [vV_sp]
   437                              <1> 
   438 000008EB 50                      	push rax	
   439                                  
   440                                  
   441                                  
   442                                  	wblock_helloworld8:		
   443                                  
   444                                  ;------------------------------------------------------
   445                                  
   446                                  ;OpADR: [48] ; Var invocation
   447                                  
   448 000008EC 4831C0                  		xor rax , rax
   449 000008EF 488D7C2408              	lea rdi , [rsp+8]	
   450 000008F4 4801C7                  	add rdi , rax	
   451 000008F7 8B07                    	mov eax , [rdi] 
   452                                  	vV_push eax	
   452                              <1> 
   452 000008F9 418907              <1>  mov DWORD[vV_sp] , %1
   452 000008FC 4983C704            <1>  add vV_sp , 4
   452                              <1> 
   453                                  
   454                                  ;OpADR: [49] ; Var invocation
   455                                  
   456 00000900 488D3C25[87010000]      		lea rdi , [i_global.line4]	
   457 00000908 4831C0                  	xor rax , rax	
   458                                  	vV_pop ecx	
   458                              <1> 
   458 0000090B 4983EF04            <1>  sub vV_sp , 4
   458 0000090F 418B0F              <1>  mov %1 , [vV_sp]
   458                              <1> 
   459 00000912 83F930                  	cmp ecx , 48	
   460 00000915 0F8D8FF7FFFF            	jge vV_bound_error	
   461 0000091B 01C8                    	add eax , ecx	
   462 0000091D 4801C7                  	add rdi , rax	
   463 00000920 8A07                    	mov al , [rdi]	
   464                                  	vV_push eax	
   464                              <1> 
   464 00000922 418907              <1>  mov DWORD[vV_sp] , %1
   464 00000925 4983C704            <1>  add vV_sp , 4
   464                              <1> 
   465                                  
   466                                  ;OpADR: [50] ; OUT opcode (8)
   467                                  
   468 00000929 E8A8F9FFFF              	call vV_io_out_char_buffer
   469                                  
   470                                  ;OpADR: [51] ; ; Loop init 
   471                                  
   472 0000092E FF442408                		inc DWORD[rsp + 8]
   473 00000932 488B442408              	mov rax , [rsp + 8]	;get index
   474 00000937 488B0C24                	mov rcx , [rsp]	;get max
   475 0000093B 39C8                    	cmp eax , ecx	
   476 0000093D 72AD                    	jb wblock_helloworld8	
   477                                  
   478                                  
   479                                  
   480                                  	wblock_helloworld9:		
   481                                  
   482                                  ;------------------------------------------------------
   483                                  
   484                                  ;OpADR: [52] ; Loop Cleanup 
   485                                  
   486 0000093F 4883C410                	add rsp , 16	
   487                                  
   488                                  ;OpADR: [53] ; FLUSH opcode
   489                                  
   490 00000943 E8CDF8FFFF              	call vV_io_flush 
   491                                  
   492                                  ;OpADR: [54] ; PUSH opcode 
   493                                  
   494                                  	vV_push 5
   494                              <1> 
   494 00000948 41C70705000000      <1>  mov DWORD[vV_sp] , %1
   494 0000094F 4983C704            <1>  add vV_sp , 4
   494                              <1> 
   495                                  
   496                                  ;OpADR: [55] ; Var invocation
   497                                  
   498 00000953 488D3C25[4C010000]      		lea rdi , [i_global.sizes]	
   499 0000095B 4831C0                  	xor rax , rax	
   500                                  	vV_pop ecx	
   500                              <1> 
   500 0000095E 4983EF04            <1>  sub vV_sp , 4
   500 00000962 418B0F              <1>  mov %1 , [vV_sp]
   500                              <1> 
   501 00000965 83F906                  	cmp ecx , 6	
   502 00000968 0F8D3CF7FFFF            	jge vV_bound_error	
   503 0000096E 01C8                    	add eax , ecx	
   504 00000970 C1E002                  	shl eax , 2	
   505 00000973 4801C7                  	add rdi , rax	
   506 00000976 8B07                    	mov eax , [rdi]	
   507                                  	vV_push eax	
   507                              <1> 
   507 00000978 418907              <1>  mov DWORD[vV_sp] , %1
   507 0000097B 4983C704            <1>  add vV_sp , 4
   507                              <1> 
   508                                  
   509                                  ;OpADR: [56] ; PUSH opcode 
   510                                  
   511                                  	vV_push 0
   511                              <1> 
   511 0000097F 41C70700000000      <1>  mov DWORD[vV_sp] , %1
   511 00000986 4983C704            <1>  add vV_sp , 4
   511                              <1> 
   512                                  
   513                                  ;OpADR: [57] ; Loop check 
   514                                  
   515                                  		vV_pop eax	;get index
   515                              <1> 
   515 0000098A 4983EF04            <1>  sub vV_sp , 4
   515 0000098E 418B07              <1>  mov %1 , [vV_sp]
   515                              <1> 
   516 00000991 50                      	push rax	
   517                                  	vV_pop eax	;get limit
   517                              <1> 
   517 00000992 4983EF04            <1>  sub vV_sp , 4
   517 00000996 418B07              <1>  mov %1 , [vV_sp]
   517                              <1> 
   518 00000999 50                      	push rax	
   519                                  
   520                                  
   521                                  
   522                                  	wblock_helloworld10:		
   523                                  
   524                                  ;------------------------------------------------------
   525                                  
   526                                  ;OpADR: [58] ; Var invocation
   527                                  
   528 0000099A 4831C0                  		xor rax , rax
   529 0000099D 488D7C2408              	lea rdi , [rsp+8]	
   530 000009A2 4801C7                  	add rdi , rax	
   531 000009A5 8B07                    	mov eax , [rdi] 
   532                                  	vV_push eax	
   532                              <1> 
   532 000009A7 418907              <1>  mov DWORD[vV_sp] , %1
   532 000009AA 4983C704            <1>  add vV_sp , 4
   532                              <1> 
   533                                  
   534                                  ;OpADR: [59] ; Var invocation
   535                                  
   536 000009AE 488D3C25[64010000]      		lea rdi , [i_global.line5]	
   537 000009B6 4831C0                  	xor rax , rax	
   538                                  	vV_pop ecx	
   538                              <1> 
   538 000009B9 4983EF04            <1>  sub vV_sp , 4
   538 000009BD 418B0F              <1>  mov %1 , [vV_sp]
   538                              <1> 
   539 000009C0 83F923                  	cmp ecx , 35	
   540 000009C3 0F8DE1F6FFFF            	jge vV_bound_error	
   541 000009C9 01C8                    	add eax , ecx	
   542 000009CB 4801C7                  	add rdi , rax	
   543 000009CE 8A07                    	mov al , [rdi]	
   544                                  	vV_push eax	
   544                              <1> 
   544 000009D0 418907              <1>  mov DWORD[vV_sp] , %1
   544 000009D3 4983C704            <1>  add vV_sp , 4
   544                              <1> 
   545                                  
   546                                  ;OpADR: [60] ; OUT opcode (8)
   547                                  
   548 000009D7 E8FAF8FFFF              	call vV_io_out_char_buffer
   549                                  
   550                                  ;OpADR: [61] ; ; Loop init 
   551                                  
   552 000009DC FF442408                		inc DWORD[rsp + 8]
   553 000009E0 488B442408              	mov rax , [rsp + 8]	;get index
   554 000009E5 488B0C24                	mov rcx , [rsp]	;get max
   555 000009E9 39C8                    	cmp eax , ecx	
   556 000009EB 72AD                    	jb wblock_helloworld10	
   557                                  
   558                                  
   559                                  
   560                                  	wblock_helloworld11:		
   561                                  
   562                                  ;------------------------------------------------------
   563                                  
   564                                  ;OpADR: [62] ; Loop Cleanup 
   565                                  
   566 000009ED 4883C410                	add rsp , 16	
   567                                  
   568                                  ;OpADR: [63] ; FLUSH opcode
   569                                  
   570 000009F1 E81FF8FFFF              	call vV_io_flush 
   571                                  
   572                                  ;OpADR: [64] ; Var Ref assignement	
   573                                  
   574 000009F6 4831C0                  		xor rax , rax
   575 000009F9 488D3C25[3C010000]      	lea rdi , [i_global.a]	
   576 00000A01 4889FE                  	mov rsi , rdi	
   577 00000A04 4801C6                  	add rsi , rax	
   578 00000A07 4831C0                  	xor rax , rax
   579 00000A0A 488D3C25[44010000]      	lea rdi , [i_global.b]	
   580 00000A12 4801C7                  	add rdi , rax	
   581 00000A15 8B06                    	mov eax , [rsi]	
   582 00000A17 8907                    	mov DWORD[rdi] , eax	
   583                                  
   584                                  ;OpADR: [65] ;GET opcode (9)
   585                                  
   586                                  	; GET opcode (9)			
   587                                  
   588 00000A19 E899F9FFFF              call vV_io_get_packed_char 
   589                                  
   590                                  ;OpADR: [66]  DUP opcode (1)
   591                                  	vV_dup 1
   591                              <1> 
   591 00000A1E B901000000          <1>  mov ecx , %1
   591 00000A23 498D77FC            <1>  lea rsi , [vV_sp-cell(%1)]
   591 00000A27 4C89FF              <1>  mov rdi , vV_sp
   591                              <1> 
   591 00000A2A F3A5                <1>  rep movsd
   591                              <1> 
   591 00000A2C 4983C704            <1>  add vV_sp , cell(%1)
   591                              <1> 
   592                                  
   593                                  ;OpADR: [67] ; BUFF_OUT opcode (9)
   594                                  
   595 00000A30 E896F8FFFF              	call vV_io_out_packed_char
   596                                  
   597                                  ;OpADR: [68] ; BUFF_OUT opcode (3)
   598                                  
   599 00000A35 41BA[E0040000]          	 mov r10d , vV_FORMAT_HEX	
   600 00000A3B E82FF8FFFF              	call vV_io_out	
   601                                  
   602                                  ;OpADR: [69] ;GET opcode (8)
   603                                  
   604                                  	; GET opcode (8)			
   605                                  
   606 00000A40 E85CF9FFFF              call vV_io_get_char	
   607                                  
   608                                  ;OpADR: [70]  DUP opcode (1)
   609                                  	vV_dup 1
   609                              <1> 
   609 00000A45 B901000000          <1>  mov ecx , %1
   609 00000A4A 498D77FC            <1>  lea rsi , [vV_sp-cell(%1)]
   609 00000A4E 4C89FF              <1>  mov rdi , vV_sp
   609                              <1> 
   609 00000A51 F3A5                <1>  rep movsd
   609                              <1> 
   609 00000A53 4983C704            <1>  add vV_sp , cell(%1)
   609                              <1> 
   610                                  
   611                                  ;OpADR: [71] ; BUFF_OUT opcode (8)
   612                                  
   613 00000A57 E864F8FFFF              	call vV_io_out_char
   614                                  
   615                                  ;OpADR: [72] ; BUFF_OUT opcode (3)
   616                                  
   617 00000A5C 41BA[E0040000]          	 mov r10d , vV_FORMAT_HEX	
   618 00000A62 E808F8FFFF              	call vV_io_out	
   619                                  
   620                                  		
   621 00000A67 4889EC                  		mov rsp , rbp
   622 00000A6A 5D                      		pop rbp
   623 00000A6B C3                      		ret
   624                                  
   625                                  ;Transpiled from vV with vVc version 0.0.4.5
   626                                  		
   627                                  		
